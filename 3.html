<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DPlayer M3U8 Example</title>
  <style>
    body {
      margin: 0;
      background-color: #000;
    }
    #dplayer {
      width: 100%;
      height: 100vh;
    }
  </style>
</head>
<body>
  <div id="dplayer"></div>

  <!-- HLS.js -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  
  <!-- DPlayer -->
  <script src="https://cdn.jsdelivr.net/npm/dplayer@1.26.0/dist/DPlayer.min.js"></script>

  <script>
    const isHlsSupported = Hls.isSupported();

    const dp = new DPlayer({
      container: document.getElementById('dplayer'),
      autoplay: true,
      live: true,
      screenshot: false,
      video: {
        url: 'https://tataplay.slivcdn.com/hls/live/2011747/TEN1HD/master_2000.m3u8',
        type: isHlsSupported ? 'customHls' : 'auto',
        customType: {
          customHls: function(video, player) {
            const hls = new Hls();
            hls.loadSource(video.src);
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, function () {
              video.play();
            });
            hls.on(Hls.Events.ERROR, function(event, data) {
              console.error('HLS.js error:', data);
              player.notice('Error loading video stream', 3000, 0.8);
            });
          }
        }
      }
    });
  </script>
</body>
</html>
